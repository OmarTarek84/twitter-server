(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[16],{126:function(e,t,a){},127:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(83),s=a(0),r=a(91),i=a(16),o=a(5),u=a(13),l=a(12),h=a(87),j=a(29),m=(a(126),function(e){var t=e.closeChatNameModel,a=e.changeChatname,r=Object(s.useState)(""),i=Object(n.a)(r,2),o=i[0],u=i[1];return Object(c.jsx)("div",{className:"backdrop",children:Object(c.jsxs)("div",{className:"changeChatModal",children:[Object(c.jsxs)("div",{className:"titleP",children:[Object(c.jsx)("h3",{children:"Change The Chat Name"}),Object(c.jsx)("i",{className:"fa fa-times",onClick:t})]}),Object(c.jsx)("div",{className:"changeChatInput",children:Object(c.jsx)("input",{type:"text",name:"chatname",value:o,onChange:function(e){return u(e.target.value)}})}),Object(c.jsxs)("div",{className:"btnActions",children:[Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){return a(o)},children:"Save"}),Object(c.jsx)("button",{onClick:t,className:"btn btn-danger",children:"Cancel"})]})]})})});a(127),t.default=function(){var e=Object(o.f)(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.chat})),p=a.chatError,b=a.chatLoading,d=a.chat,f=Object(s.useState)(!1),O=Object(n.a)(f,2),g=O[0],x=O[1],N=Object(r.a)(),v=N.handleSubmit,C=N.register,k=function(){x(!0)},A=function(){x(!1)};Object(s.useEffect)((function(){var a=e.pathname.split("/")[2];a?t(Object(h.c)(a)).then((function(){})):l.a.push("/messages")}),[e.pathname,t]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"messagechat",children:[Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("h2",{children:"Chat"}),Object(c.jsx)(u.a,{to:"/messages/new",children:Object(c.jsx)("i",{className:"far fa-plus-square"})})]}),d&&Object(c.jsx)("div",{className:"peoplesChat",children:function(){if(d){var e=d.users.filter((function(e){return e.username!==localStorage.getItem("userName")})),t=e.map((function(e){return e.firstName+" "+e.lastName}));return d.isGroupChat&&e[1]?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"images",children:[Object(c.jsx)("img",{className:"firstImg",src:e[0].profilePic,alt:e[0].username}),Object(c.jsx)("img",{className:"secondImg",src:e[1].profilePic,alt:e[1].username}),e.length>2&&Object(c.jsxs)("span",{className:"usersLeft",children:["+",e.length-2]})]}),Object(c.jsx)("span",{className:"chatname",onClick:k,children:d.chatName?d.chatName:t.join(", ")})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{className:"singleImg",src:e[0].profilePic,alt:e[0].username})}),Object(c.jsx)("span",{className:"chatname",children:e[0].firstName+" "+e[0].lastName})]})}}()}),Object(c.jsx)("div",{className:"chats",children:b?Object(c.jsx)(j.a,{width:"60px"}):p?Object(c.jsx)("h4",{className:"chaterror",children:p}):Object(c.jsx)("h1",{children:"Success"})}),Object(c.jsxs)("form",{className:"submitMsg",onSubmit:v((function(e){console.log(e)})),children:[Object(c.jsx)("input",{type:"text",name:"msg",placeholder:"Type a message...",ref:C({required:!0})}),Object(c.jsx)("button",{type:"submit",children:Object(c.jsx)("i",{className:"fas fa-paper-plane"})})]})]}),g&&Object(c.jsx)(m,{closeChatNameModel:A,changeChatname:function(a){A(),t(Object(h.a)(e.pathname.split("/")[2],a))}})]})}},87:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l}));var c=a(21),n=a.n(c),s=a(27),r=a(28),i=a(6),o=function(e){return function(){var t=Object(s.a)(n.a.mark((function t(a,c){var s,o,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.CHAT_LOADING}),s=c().user&&c().user.token?c().user.token:localStorage.getItem("accessToken"),t.next=5,r.a.get("/chat/getMessages?chatId=".concat(e),{headers:{Authorization:"Bearer "+s}});case 5:o=t.sent,u=o.data,a({type:i.FETCH_CHAT_MESSAGES,chat:u}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:i.CHAT_MESSAGES_ERROR,error:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},u=function(e,t){return function(){var a=Object(s.a)(n.a.mark((function a(c,s){var o,u,l;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:i.CHAT_LOADING}),a.next=4,r.a.post("/chat/createChat?isGroupChat=".concat(t),{users:e},{headers:{Authorization:"Bearer "+(s().user.token||localStorage.getItem("accessToken"))}});case 4:return o=a.sent,u=o.data,a.next=8,c({type:i.CREATE_CHAT,chat:u});case 8:return l=a.sent,a.abrupt("return",l);case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()},l=function(e,t){return function(){var a=Object(s.a)(n.a.mark((function a(c,s){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.put("/chat/changeChatName?chatId=".concat(e),{chatName:t},{headers:{Authorization:"Bearer "+(s().user.token||localStorage.getItem("accessToken"))}});case 3:c({type:i.CHANGE_CHAT_NAME,chatName:t}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e,t){return a.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=16.395d1190.chunk.js.map