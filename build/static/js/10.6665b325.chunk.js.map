{"version":3,"sources":["components/NewMessage/NewMessage.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","store/Actions/user.js","store/Actions/chat.js","components/FollowList/Users/User/User.js"],"names":["NewMessage","useState","inputVal","setInputVal","selectedUsers","setSelectersUsers","inputRef","useRef","dispatch","useDispatch","users","useSelector","state","userSearch","chatLoading","chat","removeLastSelectedUsers","e","key","current","value","console","log","filter","user","i","length","useEffect","document","addEventListener","timeoutId","setTimeout","usernamesSelected","map","n","username","join","searchUsers","clearTimeout","removeEventListener","type","CLEAR_USER_SEARCH","renderUserList","index","firstName","lastName","profilePic","parentUserClicked","className","selUser","name","placeholder","ref","onChange","target","width","onClick","mappedUsernames","createChat","then","history","push","disabled","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","unsupportedIterableToArray","TypeError","signup","formData","getState","a","axios","post","USER_ERROR","errorMessage","response","data","message","login","AUTH_LOADING","localStorage","setItem","accessToken","userDetails","email","LOGIN","token","pinPostUser","postId","put","headers","Authorization","getItem","PIN_POST","pinnedPost","pintype","currentPage","pageSize","search","filterUsernames","USERS_LOADING","get","FETCH_USERS","currentPageUser","pageSizeUser","pagesUser","pages","totalItemsCountUser","totalItemsCount","getChatMsgs","chatId","CHAT_LOADING","FETCH_CHAT_MESSAGES","CHAT_MESSAGES_ERROR","error","isGroupChat","CREATE_CHAT","result","changeChatName","chatName","CHANGE_CHAT_NAME","User","loggedinFollowing","followUser","followLoading","followIndex","userIndex","ifFollowing","findIndex","u","src","alt","to","stopPropagation","style","display","backgroundColor","color"],"mappings":"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","file":"static/js/10.6665b325.chunk.js","sourcesContent":["/* eslint-disable */\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { CLEAR_USER_SEARCH } from \"../../store/Actions/actionTypes\";\r\nimport { searchUsers } from \"../../store/Actions/user\";\r\nimport User from \"../FollowList/Users/User/User\";\r\nimport history from \"../../history\";\r\nimport \"./NewMessage.scss\";\r\nimport { createChat } from \"../../store/Actions/chat\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\nconst NewMessage = () => {\r\n  const [inputVal, setInputVal] = useState(\"\");\r\n  const [selectedUsers, setSelectersUsers] = useState([]);\r\n  const inputRef = useRef();\r\n  const dispatch = useDispatch();\r\n  const { users } = useSelector((state) => state.userSearch);\r\n  const { chatLoading } = useSelector((state) => state.chat);\r\n\r\n  const parentUserClicked = (user) => {\r\n    setSelectersUsers((users) => [...users, user]);\r\n    dispatch({ type: CLEAR_USER_SEARCH });\r\n    setInputVal(\"\");\r\n  };\r\n\r\n  const removeLastSelectedUsers = (e) => {\r\n    if (e.key == \"Backspace\" && !inputRef.current.value) {\r\n      console.log(selectedUsers);\r\n      setSelectersUsers((users) =>\r\n        users.filter((user, i) => i !== users.length - 1)\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", removeLastSelectedUsers);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!inputVal) {\r\n      dispatch({ type: CLEAR_USER_SEARCH });\r\n      return;\r\n    }\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      const mappedUsernames = selectedUsers.map((n) => n.username);\r\n      const usernamesSelected = mappedUsernames.join(\",\");\r\n      dispatch(searchUsers(0, 1000, inputVal, usernamesSelected));\r\n    }, 400);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      document.removeEventListener(\"keydown\", removeLastSelectedUsers);\r\n    };\r\n  }, [inputVal, dispatch, selectedUsers]);\r\n\r\n  const renderUserList = users.map((user, index) => {\r\n    return (\r\n      <User\r\n        key={user.username}\r\n        firstName={user.firstName}\r\n        lastName={user.lastName}\r\n        username={user.username}\r\n        profilePic={user.profilePic}\r\n        parentUserClicked={() => parentUserClicked(user)}\r\n      />\r\n    );\r\n  });\r\n\r\n  const createChatReq = () => {\r\n    const mappedUsernames = selectedUsers.map((n) => n.username);\r\n    dispatch(createChat(mappedUsernames, true)).then(() => {\r\n      history.push(\"/messages\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"newmessage\">\r\n        <div className=\"h2\">\r\n          <h2>New Message</h2>\r\n        </div>\r\n        <div className=\"personsinput\">\r\n          <span>To: </span>\r\n          <div className=\"users-input\">\r\n            <div className=\"users\">\r\n              {selectedUsers.map((selUser) => {\r\n                return (\r\n                  <span key={selUser.username}>\r\n                    {selUser.firstName} {selUser.lastName}\r\n                  </span>\r\n                );\r\n              })}\r\n            </div>\r\n            <div className=\"input\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"person\"\r\n                placeholder=\"Type the name of the person/s\"\r\n                value={inputVal}\r\n                ref={inputRef}\r\n                onChange={(e) => setInputVal(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {users && users.length > 0 && (\r\n          <div className=\"usersTable\">{renderUserList}</div>\r\n        )}\r\n      </div>\r\n      <div className=\"createChatBtn\">\r\n        {chatLoading ? (\r\n          <Spinner width=\"30px\" />\r\n        ) : (\r\n          <button onClick={createChatReq} disabled={selectedUsers.length <= 0}>\r\n            Create Chat\r\n          </button>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import axios from '../../axios';\r\nimport { AUTH_LOADING, FETCH_USERS, LOGIN, PIN_POST, USERS_LOADING, USER_ERROR } from './actionTypes';\r\nimport history from '../../history';\r\n\r\nexport const signup = formData => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            await axios.post('/auth/signup', formData);\r\n            history.push('/login');\r\n        } catch(err) {\r\n            dispatch({\r\n                type: USER_ERROR,\r\n                errorMessage: err.response && err.response.data && err.response.data.message ? err.response.data.message: err.message\r\n            });\r\n        }\r\n    };\r\n};\r\n\r\nexport const login = formData => {\r\n    return async (dispatch, getState) => {\r\n        dispatch({\r\n            type: AUTH_LOADING\r\n        });\r\n        try {\r\n            const response = await axios.post('/auth/login', formData);\r\n            localStorage.setItem('accessToken', response.data.accessToken);\r\n            localStorage.setItem('email', response.data.userDetails.email);\r\n            localStorage.setItem('userName', response.data.userDetails.username);\r\n            localStorage.setItem('firstName', response.data.userDetails.firstName);\r\n            localStorage.setItem('lastName', response.data.userDetails.lastName);\r\n            localStorage.setItem('profilePic', response.data.userDetails.profilePic);\r\n            history.push('/');\r\n            dispatch({\r\n                type: LOGIN,\r\n                token: response.data.accessToken,\r\n                userDetails: response.data.userDetails\r\n            });\r\n        } catch(err) {\r\n            dispatch({\r\n                type: USER_ERROR,\r\n                errorMessage: err.response && err.response.data && err.response.data.message ? err.response.data.message: err.message\r\n            });\r\n        }\r\n    };\r\n};\r\n\r\n\r\nexport const pinPostUser = postId => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            const response = await axios.put('/user/pinPost', {postId}, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + (getState().user.token || localStorage.getItem('accessToken'))\r\n                }\r\n            });\r\n            console.log(response.data);\r\n            dispatch({\r\n                type: PIN_POST,\r\n                pinnedPost: response.data.pinnedPost,\r\n                pintype: response.data.type\r\n            });\r\n        } catch(err) {\r\n            dispatch({\r\n                type: USER_ERROR,\r\n                errorMessage: err.response && err.response.data && err.response.data.message ? err.response.data.message: err.message\r\n            });\r\n        }\r\n    };\r\n};\r\n\r\n\r\nexport const searchUsers = (currentPage, pageSize, search, filterUsernames) => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            dispatch({\r\n                type: USERS_LOADING\r\n            });\r\n            const response = await axios.get(`/user/search?currentPage=${currentPage}&pageSize=${pageSize}&search=${search}&filterUsernames=${filterUsernames}`, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + (getState().user.token || localStorage.getItem('accessToken'))\r\n                }\r\n            });\r\n            console.log('SEARCH USERS RESULT', response.data);\r\n            dispatch({\r\n                type: FETCH_USERS,\r\n                userDetails: response.data.userDetails,\r\n                currentPageUser: response.data.currentPage,\r\n                pageSizeUser: response.data.pageSize,\r\n                pagesUser: response.data.pages,\r\n                totalItemsCountUser: response.data.totalItemsCount,\r\n            });\r\n        } catch(err) {\r\n            dispatch({\r\n                type: USER_ERROR,\r\n                errorMessage: err.response && err.response.data && err.response.data.message ? err.response.data.message: err.message\r\n            });\r\n        }\r\n    };\r\n};","import axios from '../../axios';\r\nimport { CHANGE_CHAT_NAME, CHAT_LOADING, CHAT_MESSAGES_ERROR, CREATE_CHAT, FETCH_CHAT_MESSAGES } from './actionTypes';\r\n\r\nexport const getChatMsgs = chatId => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            dispatch({type: CHAT_LOADING});\r\n            const token = getState().user && getState().user.token ? getState().user.token: localStorage.getItem('accessToken');\r\n            const {data} = await axios.get(`/chat/getMessages?chatId=${chatId}`, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            });\r\n            dispatch({\r\n                type: FETCH_CHAT_MESSAGES,\r\n                chat: data\r\n            });\r\n        } catch(err) {\r\n            dispatch({\r\n                type: CHAT_MESSAGES_ERROR,\r\n                error: err.response && err.response.data && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message\r\n            });\r\n        }\r\n    };\r\n};\r\n\r\n\r\nexport const createChat = (users, isGroupChat) => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            dispatch({type: CHAT_LOADING});\r\n            const {data} = await axios.post(`/chat/createChat?isGroupChat=${isGroupChat}`, {users}, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + (getState().user.token || localStorage.getItem('accessToken'))\r\n                }\r\n            });\r\n            const result = await dispatch({\r\n                type: CREATE_CHAT,\r\n                chat: data\r\n            });\r\n            return result;\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n};\r\n\r\n\r\nexport const changeChatName = (chatId, chatName) => {\r\n    return async (dispatch, getState) => {\r\n        try {\r\n            await axios.put(`/chat/changeChatName?chatId=${chatId}`, {chatName}, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + (getState().user.token || localStorage.getItem('accessToken'))\r\n                }\r\n            });\r\n            dispatch({\r\n                type: CHANGE_CHAT_NAME,\r\n                chatName: chatName\r\n            });\r\n        } catch(err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n};","import React from \"react\";\r\nimport \"./User.scss\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst User = ({\r\n  username,\r\n  profilePic,\r\n  firstName,\r\n  lastName,\r\n  loggedinFollowing,\r\n  followUser,\r\n  followLoading,\r\n  followIndex,\r\n  userIndex,\r\n  parentUserClicked\r\n}) => {\r\n  const ifFollowing = loggedinFollowing\r\n    ? loggedinFollowing.findIndex((u) => u.username === username) > -1\r\n    : null;\r\n\r\n  return (\r\n    <div\r\n      className=\"userDet\"\r\n      key={username}\r\n      onClick={parentUserClicked}\r\n    >\r\n      <div className=\"details\">\r\n        <div className=\"picAndName\">\r\n          <img src={profilePic} alt={username} />\r\n          <Link className=\"firstlastname\" to={`/profile/${username}`} onClick={e => e.stopPropagation()}>\r\n            {firstName} {lastName}\r\n          </Link>\r\n          <span className=\"username\">@{username}</span>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"followBtn\"\r\n        style={{\r\n          display:\r\n            username === localStorage.getItem(\"userName\") || (!followUser || !loggedinFollowing)\r\n              ? \"none\"\r\n              : \"flex\",\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            backgroundColor: ifFollowing ? \"#00ACEE\" : \"white\",\r\n            color: ifFollowing ? \"white\" : \"#00ACEE\",\r\n          }}\r\n          disabled={followLoading && followIndex === userIndex}\r\n          onClick={followUser}\r\n        >\r\n          {ifFollowing ? \"Following\" : \"Follow\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"sourceRoot":""}