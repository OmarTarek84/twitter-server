{"version":3,"sources":["components/FollowList/Users/Users.js","components/FollowList/FollowList.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/FollowList/Users/User/User.js"],"names":["Users","following","followers","tabIndex","loggedinFollowing","followUser","followLoading","followIndex","userIndex","map","user","index","User","firstName","lastName","username","profilePic","initialState","listLoading","listError","reducer","state","action","type","resType","follower","filter","p","FollowList","props","useReducer","listState","dispatch","dispatch2","useDispatch","userDetails","useSelector","useState","history","location","settabIndex","a","axios","put","headers","Authorization","localStorage","getItem","response","FOLLOW_USER","newfollowingUser","data","email","useEffect","console","log","getFollowList","get","match","params","message","className","onSelect","defaultIndex","Spinner","width","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","ifFollowing","findIndex","u","src","alt","to","style","display","backgroundColor","color","disabled","onClick"],"mappings":"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","file":"static/js/9.bb41d8b8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport User from \"./User/User\";\r\nimport \"./Users.scss\";\r\n\r\nconst Users = ({ following, followers, tabIndex, loggedinFollowing, followUser, followLoading, followIndex, userIndex }) => {\r\n  let arrayToBeRendered = tabIndex === 0 ? following : followers;\r\n\r\n  const renderFollowList = arrayToBeRendered.map((user, index) => {\r\n    return (\r\n      <User\r\n        key={user.username}\r\n        firstName={user.firstName}\r\n        lastName={user.lastName}\r\n        username={user.username}\r\n        profilePic={user.profilePic}\r\n        loggedinFollowing={loggedinFollowing}\r\n        followUser={() => followUser(user.username, index)}\r\n        followLoading={followLoading}\r\n        followIndex={followIndex}\r\n        userIndex={index}\r\n      />\r\n    );\r\n  });\r\n\r\n  return renderFollowList;\r\n};\r\n\r\nexport default Users;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport axios from \"../../axios\";\r\nimport history from \"../../history\";\r\nimport { FOLLOW_USER } from \"../../store/Actions/actionTypes\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport \"./FollowList.scss\";\r\nimport Users from \"./Users/Users\";\r\n\r\nconst initialState = {\r\n  following: [],\r\n  followers: [],\r\n  username: null,\r\n  listLoading: false,\r\n  listError: null,\r\n  firstName: null,\r\n  lastName: null,\r\n  followLoading: false,\r\n  followIndex: 0,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"list_loading\":\r\n      return {\r\n        ...state,\r\n        listLoading: true,\r\n        listError: null,\r\n      };\r\n    case \"fetch_list\":\r\n      return {\r\n        ...state,\r\n        following: action.following,\r\n        followers: action.followers,\r\n        username: action.username,\r\n        firstName: action.firstName,\r\n        lastName: action.lastName,\r\n        listLoading: false,\r\n        listError: null,\r\n      };\r\n    case \"list_error\":\r\n      return {\r\n        ...state,\r\n        listLoading: false,\r\n        listError: action.listError,\r\n      };\r\n    case \"follow_loading\":\r\n      return {\r\n        ...state,\r\n        followLoading: true,\r\n        followIndex: action.followIndex,\r\n      };\r\n    case \"follow_user\":\r\n      if (action.resType === \"Add\") {\r\n        return {\r\n          ...state,\r\n        followers: [...state.followers, action.follower],\r\n          followLoading: false,\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n        followers: state.followers.filter(\r\n            (p) => p.username !== action.follower.username\r\n        ),\r\n          followLoading: false,\r\n        };\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst FollowList = (props) => {\r\n  const [listState, dispatch] = useReducer(reducer, initialState);\r\n  const dispatch2 = useDispatch();\r\n\r\n  const { userDetails } = useSelector((state) => state.user);\r\n\r\n  const [tabIndex, settabIndex] = useState(\r\n    history.location && history.location.state\r\n      ? history.location.state.tabIndex\r\n      : 0\r\n  );\r\n\r\n  const selectTabIndex = (index) => {\r\n    settabIndex(index);\r\n  };\r\n\r\n  const followUser = async (username, index) => {\r\n    dispatch({\r\n      type: \"follow_loading\",\r\n      followIndex: index,\r\n    });\r\n    const response = await axios.put(\r\n      `/user/follow/${username}`,\r\n      {},\r\n      {\r\n        headers: {\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"accessToken\"),\r\n        },\r\n      }\r\n    );\r\n    dispatch2({\r\n      type: FOLLOW_USER,\r\n      newfollowingUser:\r\n        response.data && response.data.newfollowingUser\r\n          ? response.data.newfollowingUser\r\n          : null,\r\n    });\r\n    dispatch({\r\n      type: \"follow_user\",\r\n      follower: {\r\n        firstName: userDetails.firstName,\r\n        lastName: userDetails.lastName,\r\n        email: userDetails.email,\r\n        profilePic: userDetails.profilePic,\r\n        username: userDetails.username,\r\n      },\r\n      resType: response.data.type,\r\n    });\r\n    // if (response.data.type === \"Add\") {\r\n    //   setifFollowing(true);\r\n    // } else {\r\n    //   setifFollowing(false);\r\n    // }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(history.location);\r\n    dispatch({ type: \"list_loading\" });\r\n    const getFollowList = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `/user/followList/${props.match.params.username}`,\r\n          {\r\n            headers: {\r\n              Authorization: \"Bearer \" + localStorage.getItem(\"accessToken\"),\r\n            },\r\n          }\r\n        );\r\n        console.log(response.data);\r\n        dispatch({\r\n          type: \"fetch_list\",\r\n          following: response.data.following,\r\n          followers: response.data.followers,\r\n          username: response.data.username,\r\n          firstName: response.data.firstName,\r\n          lastName: response.data.lastName,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n        dispatch({\r\n          type: \"list_error\",\r\n          listError:\r\n            err.response && err.response.data && err.response.data.message\r\n              ? err.response.data.message\r\n              : err.message,\r\n        });\r\n      }\r\n    };\r\n    if (\r\n      !history.location ||\r\n      !history.location.state ||\r\n      !history.location.state.following\r\n    ) {\r\n      getFollowList();\r\n    } else {\r\n      dispatch({\r\n        type: \"fetch_list\",\r\n        following: history.location.state.following,\r\n        followers: history.location.state.followers,\r\n        username: history.location.state.username,\r\n        firstName: history.location.state.firstName,\r\n        lastName: history.location.state.lastName,\r\n      });\r\n    }\r\n  }, [props.match.params.username]);\r\n\r\n  return (\r\n    <div className=\"followlist\">\r\n      <h2>\r\n        {listState && listState.firstName}{\" \"}\r\n        {listState.lastName && listState.lastName}\r\n      </h2>\r\n      <div className=\"tabs\">\r\n        <Tabs onSelect={selectTabIndex} defaultIndex={tabIndex}>\r\n          <TabList>\r\n            <Tab>Following</Tab>\r\n            <Tab>Followers</Tab>\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            {listState.listLoading ? (\r\n              <Spinner width=\"60\" />\r\n            ) : listState.listError ? (\r\n              listState.listError\r\n            ) : (\r\n              <Users\r\n                following={listState.following}\r\n                followUser={followUser}\r\n                loggedinFollowing={userDetails ? userDetails.following : null}\r\n                tabIndex={tabIndex}\r\n                followLoading={listState.followLoading}\r\n                followIndex={listState.followIndex}\r\n              />\r\n            )}\r\n          </TabPanel>\r\n          <TabPanel>\r\n            {listState.listLoading ? (\r\n              <Spinner width=\"60\" />\r\n            ) : listState.listError ? (\r\n              listState.listError\r\n            ) : (\r\n              <Users\r\n                followers={listState.followers}\r\n                followUser={followUser}\r\n                loggedinFollowing={userDetails ? userDetails.following : null}\r\n                tabIndex={tabIndex}\r\n                followLoading={listState.followLoading}\r\n                followIndex={listState.followIndex}\r\n              />\r\n            )}\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FollowList;\r\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from \"react\";\r\nimport \"./User.scss\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst User = ({\r\n  username,\r\n  profilePic,\r\n  firstName,\r\n  lastName,\r\n  loggedinFollowing,\r\n  followUser,\r\n  followLoading,\r\n  followIndex,\r\n  userIndex\r\n}) => {\r\n  const ifFollowing = loggedinFollowing\r\n    ? loggedinFollowing.findIndex((u) => u.username === username) > -1\r\n    : null;\r\n\r\n  return (\r\n    <div\r\n      className=\"userDet\"\r\n      key={username}\r\n    >\r\n      <div className=\"details\">\r\n        <div className=\"picAndName\">\r\n          <img src={profilePic} alt={username} />\r\n          <Link className=\"firstlastname\" to={`/profile/${username}`}>\r\n            {firstName} {lastName}\r\n          </Link>\r\n          <span className=\"username\">@{username}</span>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"followBtn\"\r\n        style={{\r\n          display:\r\n            username === localStorage.getItem(\"userName\") || (!followUser || !loggedinFollowing)\r\n              ? \"none\"\r\n              : \"flex\",\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            backgroundColor: ifFollowing ? \"#00ACEE\" : \"white\",\r\n            color: ifFollowing ? \"white\" : \"#00ACEE\",\r\n          }}\r\n          disabled={followLoading && followIndex === userIndex}\r\n          onClick={followUser}\r\n        >\r\n          {ifFollowing ? \"Following\" : \"Follow\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"sourceRoot":""}