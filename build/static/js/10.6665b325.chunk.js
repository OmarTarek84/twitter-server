(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[10],{125:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(4),s=a(83),c=a(0),o=a(16),u=a(6),i=a(84),l=a(88),p=a(12),d=(a(125),a(87)),f=a(29);t.default=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),a=t[0],m=t[1],h=Object(c.useState)([]),g=Object(s.a)(h,2),b=g[0],j=g[1],v=Object(c.useRef)(),O=Object(o.b)(),x=Object(o.c)((function(e){return e.userSearch})).users,y=Object(o.c)((function(e){return e.chat})).chatLoading,S=function(e){"Backspace"!=e.key||v.current.value||(console.log(b),j((function(e){return e.filter((function(t,a){return a!==e.length-1}))})))};Object(c.useEffect)((function(){document.addEventListener("keydown",S)}),[]),Object(c.useEffect)((function(){if(a){var e=setTimeout((function(){var e=b.map((function(e){return e.username})).join(",");O(Object(i.c)(0,1e3,a,e))}),400);return function(){clearTimeout(e),document.removeEventListener("keydown",S)}}O({type:u.CLEAR_USER_SEARCH})}),[a,O,b]);var k=x.map((function(e,t){return Object(n.jsx)(l.a,{firstName:e.firstName,lastName:e.lastName,username:e.username,profilePic:e.profilePic,parentUserClicked:function(){return function(e){j((function(t){return[].concat(Object(r.a)(t),[e])})),O({type:u.CLEAR_USER_SEARCH}),m("")}(e)}},e.username)}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"newmessage",children:[Object(n.jsx)("div",{className:"h2",children:Object(n.jsx)("h2",{children:"New Message"})}),Object(n.jsxs)("div",{className:"personsinput",children:[Object(n.jsx)("span",{children:"To: "}),Object(n.jsxs)("div",{className:"users-input",children:[Object(n.jsx)("div",{className:"users",children:b.map((function(e){return Object(n.jsxs)("span",{children:[e.firstName," ",e.lastName]},e.username)}))}),Object(n.jsx)("div",{className:"input",children:Object(n.jsx)("input",{type:"text",name:"person",placeholder:"Type the name of the person/s",value:a,ref:v,onChange:function(e){return m(e.target.value)}})})]})]}),x&&x.length>0&&Object(n.jsx)("div",{className:"usersTable",children:k})]}),Object(n.jsx)("div",{className:"createChatBtn",children:y?Object(n.jsx)(f.a,{width:"30px"}):Object(n.jsx)("button",{onClick:function(){var e=b.map((function(e){return e.username}));O(Object(d.b)(e,!0)).then((function(){p.a.push("/messages")}))},disabled:b.length<=0,children:"Create Chat"})})]})}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(31);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(u){r=!0,s=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},84:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return d}));var n=a(21),r=a.n(n),s=a(27),c=a(28),o=a(6),u=a(12),i=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.post("/auth/signup",e);case 3:u.a.push("/login"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:o.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:o.AUTH_LOADING}),t.prev=1,t.next=4,c.a.post("/auth/login",e);case 4:s=t.sent,localStorage.setItem("accessToken",s.data.accessToken),localStorage.setItem("email",s.data.userDetails.email),localStorage.setItem("userName",s.data.userDetails.username),localStorage.setItem("firstName",s.data.userDetails.firstName),localStorage.setItem("lastName",s.data.userDetails.lastName),localStorage.setItem("profilePic",s.data.userDetails.profilePic),u.a.push("/"),a({type:o.LOGIN,token:s.data.accessToken,userDetails:s.data.userDetails}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:o.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,a){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.put("/user/pinPost",{postId:e},{headers:{Authorization:"Bearer "+(n().user.token||localStorage.getItem("accessToken"))}});case 3:s=t.sent,console.log(s.data),a({type:o.PIN_POST,pinnedPost:s.data.pinnedPost,pintype:s.data.type}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:o.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},d=function(e,t,a,n){return function(){var u=Object(s.a)(r.a.mark((function s(u,i){var l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u({type:o.USERS_LOADING}),r.next=4,c.a.get("/user/search?currentPage=".concat(e,"&pageSize=").concat(t,"&search=").concat(a,"&filterUsernames=").concat(n),{headers:{Authorization:"Bearer "+(i().user.token||localStorage.getItem("accessToken"))}});case 4:l=r.sent,console.log("SEARCH USERS RESULT",l.data),u({type:o.FETCH_USERS,userDetails:l.data.userDetails,currentPageUser:l.data.currentPage,pageSizeUser:l.data.pageSize,pagesUser:l.data.pages,totalItemsCountUser:l.data.totalItemsCount}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),u({type:o.USER_ERROR,errorMessage:r.t0.response&&r.t0.response.data&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 12:case"end":return r.stop()}}),s,null,[[0,9]])})));return function(e,t){return u.apply(this,arguments)}}()}},87:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(21),r=a.n(n),s=a(27),c=a(28),o=a(6),u=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(a,n){var s,u,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:o.CHAT_LOADING}),s=n().user&&n().user.token?n().user.token:localStorage.getItem("accessToken"),t.next=5,c.a.get("/chat/getMessages?chatId=".concat(e),{headers:{Authorization:"Bearer "+s}});case 5:u=t.sent,i=u.data,a({type:o.FETCH_CHAT_MESSAGES,chat:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:o.CHAT_MESSAGES_ERROR,error:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},i=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){var u,i,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:o.CHAT_LOADING}),a.next=4,c.a.post("/chat/createChat?isGroupChat=".concat(t),{users:e},{headers:{Authorization:"Bearer "+(s().user.token||localStorage.getItem("accessToken"))}});case 4:return u=a.sent,i=u.data,a.next=8,n({type:o.CREATE_CHAT,chat:i});case 8:return l=a.sent,a.abrupt("return",l);case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()},l=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n,s){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.put("/chat/changeChatName?chatId=".concat(e),{chatName:t},{headers:{Authorization:"Bearer "+(s().user.token||localStorage.getItem("accessToken"))}});case 3:n({type:o.CHANGE_CHAT_NAME,chatName:t}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e,t){return a.apply(this,arguments)}}()}},88:function(e,t,a){"use strict";var n=a(2),r=(a(0),a(89),a(13));t.a=function(e){var t=e.username,a=e.profilePic,s=e.firstName,c=e.lastName,o=e.loggedinFollowing,u=e.followUser,i=e.followLoading,l=e.followIndex,p=e.userIndex,d=e.parentUserClicked,f=o?o.findIndex((function(e){return e.username===t}))>-1:null;return Object(n.jsxs)("div",{className:"userDet",onClick:d,children:[Object(n.jsx)("div",{className:"details",children:Object(n.jsxs)("div",{className:"picAndName",children:[Object(n.jsx)("img",{src:a,alt:t}),Object(n.jsxs)(r.a,{className:"firstlastname",to:"/profile/".concat(t),onClick:function(e){return e.stopPropagation()},children:[s," ",c]}),Object(n.jsxs)("span",{className:"username",children:["@",t]})]})}),Object(n.jsx)("div",{className:"followBtn",style:{display:t!==localStorage.getItem("userName")&&u&&o?"flex":"none"},children:Object(n.jsx)("button",{style:{backgroundColor:f?"#00ACEE":"white",color:f?"white":"#00ACEE"},disabled:i&&l===p,onClick:u,children:f?"Following":"Follow"})})]},t)}},89:function(e,t,a){}}]);
//# sourceMappingURL=10.6665b325.chunk.js.map