(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[8],{146:function(e,t,n){"use strict";var o=n(2),s=(n(1),n(147),n(156)),i=n.n(s);t.a=function(e){var t=e.handlePageChange,n=e.pageSize,s=e.totalItemsCount,r=e.currentPage;return Object(o.jsx)(i.a,{itemClass:"page-item",linkClass:"page-link",activePage:r,itemsCountPerPage:n,totalItemsCount:s,pageRangeDisplayed:10,onChange:t})}},147:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var o=n(2),s=n(1),i=n(21),r=n(145),a=n(144),c=(n(162),n(143)),d=(n(163),n(153)),u=n(45),p=function(){var e=Object(i.c)((function(e){return e.user})).userDetails,t=Object(d.a)(),n=t.register,a=t.handleSubmit,p=t.errors,l=t.reset,P=Object(s.useState)(!1),g=Object(c.a)(P,2),m=g[0],f=g[1],b=Object(i.b)();return Object(o.jsx)("div",{className:"postfeed",children:Object(o.jsxs)("div",{className:"postflex",children:[Object(o.jsx)("div",{className:"profilePic",children:Object(o.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePic)||localStorage.getItem("profilePic"),alt:"profile pic"})}),Object(o.jsxs)("form",{onSubmit:a((function(e){f(!0),b(Object(r.a)(e)).then((function(){l(),f(!1)})).catch((function(e){return f(!1)}))})),children:[Object(o.jsx)("textarea",{name:"content",placeholder:"What's Happening?",ref:n({required:!0})}),m?Object(o.jsx)("div",{className:"spinner",children:Object(o.jsx)(u.a,{width:"40px"})}):Object(o.jsx)("button",{type:"submit",disabled:!!p.content,className:"btn btn-primary",children:"Post"})]})]})})},l=(n(164),n(152)),P=function(e,t){var n=6e4,o=36e5,s=864e5,i=2592e6,r=31536e6,a=e-t;return a<n?a/1e3<30?"Just Now":Math.round(a/1e3)+" seconds ago":a<o?Math.round(a/n)+" minutes ago":a<s?Math.round(a/o)+" hours ago":a<i?Math.round(a/s)+" days ago":a<r?Math.round(a/i)+" months ago":Math.round(a/r)+" years ago"},g=function(e){var t=e.posts,n=e.likePostReq,s=e.postActionLoading,i=e.submitReplyReq,r=e.viewSinglePostReq,a=e.retweetActionLoading,c=e.loggedInUsername,d=e.retweetReq,u=e.deletePost,p=e.goToProfile,g=e.pinPost,m=e.pinnedPost,f=e.pinnedPostId,b=t.map((function(e){return Object(o.jsx)(l.a,{postId:e._id,firstName:e.postedBy.firstName,lastName:e.postedBy.lastName,username:e.postedBy.username,content:e.content,createdAt:P(new Date,new Date(e.content?e.createdAt:e.retweetData.createdAt)),goToProfile:p,profilePic:e.postedBy.profilePic,likePostReq:n,likes:e.likes,postActionLoading:s,loggedInUsername:c,retweetReq:d,retweetActionLoading:a,retweetUsers:e.retweetUsers,retweetData:e.retweetData,submitReplyReq:i,replyTo:e.replyTo||null,viewSinglePostReq:function(){return r(e._id,e.replyTo?e.replyTo.originalPost._id:null)},deletePost:u,pinPost:g,pinnedPost:m,pinnedPostId:f},e._id)}));return Object(o.jsx)("div",{className:"posts",children:b})},m=n(8),f=n(146),b=n(33),j=n(46),h=function(e,t){var n=6e4,o=36e5,s=864e5,i=2592e6,r=31536e6,a=e-t;return a<n?a/1e3<30?"Just Now":Math.round(a/1e3)+" seconds ago":a<o?Math.round(a/n)+" minutes ago":a<s?Math.round(a/o)+" hours ago":a<i?Math.round(a/s)+" days ago":a<r?Math.round(a/i)+" months ago":Math.round(a/r)+" years ago"};t.default=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useRef)(),c=Object(s.useRef)(),d=Object(j.a)().socket,P=Object(i.b)(),y=Object(i.c)((function(e){return e.post})),w=y.posts,O=y.postActionLoading,R=y.retweetActionLoading,x=y.postLoading,v=y.errorMessage,I=y.currentPage,S=y.pageSize,N=y.pages,T=y.totalItemsCount,q=Object(i.c)((function(e){return e.user})).userDetails;Object(s.useEffect)((function(){P(Object(r.c)(1,30,""))}),[P]);var D=function(e,t,n){P(Object(r.d)(e,t)),n!==q.username&&d.current.emit("notification Sent",{notificationFrom:q.username,notificationTo:[n],postId:e,type:"like"})},A=function(e,t,n){c.current=b.b.warning("Submitting Your retweet..."),P(Object(r.f)(e,t)).then((function(){b.b.dismiss(c.current),b.b.success("Retweet Success"),n!==q.username&&d.current.emit("notification Sent",{notificationFrom:q.username,notificationTo:[n],postId:e,type:"retweet"})}))},k=function(e,t,o){n.current=b.b.warning("Submitting Your Reply..."),P(Object(r.e)(e.reply,t)).then((function(){b.b.dismiss(n.current),b.b.success("Reply Post Success"),d.current.emit("notification Sent",{notificationFrom:q.username,notificationTo:[o],postId:t,type:"reply"})}))},_=function(e,t){m.a.push("/post/".concat(t||e),{postId:t||e,backgroundGreenPostId:e})},B=function(e){m.a.push("/profile/".concat(e))},M=function(e){t.current=b.b.warning("Pinning Post..."),P(Object(a.b)(e)).then((function(){b.b.dismiss(t.current),b.b.success("Pin Post Success")}))};return Object(o.jsxs)("div",{className:"homepage",children:[Object(o.jsx)("h1",{children:"Home"}),Object(o.jsx)(p,{}),q&&q.pinnedPost&&Object(o.jsx)("div",{className:"pinnedPost",children:Object(o.jsx)(l.a,{postId:q.pinnedPost._id,firstName:q.pinnedPost.postedBy.firstName,lastName:q.pinnedPost.postedBy.lastName,username:q.pinnedPost.postedBy.username,content:q.pinnedPost.content,pinnedPost:!0,viewSinglePostReq:function(){return _(q.pinnedPost._id,q.pinnedPost.replyTo?q.pinnedPost.replyTo.originalPost._id:null)},pinnedPostId:q.pinnedPost._id,createdAt:h(new Date,new Date(q.pinnedPost.content?q.pinnedPost.createdAt:q.pinnedPost.retweetData.createdAt)),profilePic:q.pinnedPost.postedBy.profilePic,likePostReq:function(){return D(q.pinnedPost._id,q.pinnedPost.replyTo?q.pinnedPost.replyTo.originalPost._id:null,q.pinnedPost.postedBy.username)},likes:q.pinnedPost.likes,postActionLoading:O,loggedInUsername:q.username||localStorage.getItem("userName"),goToProfile:function(){return B(q.pinnedPost.postedBy.username)},retweetReq:function(){return A(q.pinnedPost._id,q.pinnedPost.retweetData?q.pinnedPost.retweetData._id:null,q.pinnedPost.postedBy.username)},retweetActionLoading:R,retweetUsers:q.pinnedPost.retweetUsers,retweetData:q.pinnedPost.retweetData,submitReplyReq:k,replyToUsername:q.pinnedPost.replyTo&&q.pinnedPost.replyTo.originalPost?q.pinnedPost.replyTo.originalPost.postedBy.username:null,replyPostTypeReplyToUsername:q.pinnedPost.postedBy.username,pinPost:function(){return M(q.pinnedPost._id)}})}),N>1&&Object(o.jsx)("div",{className:"paginate",children:Object(o.jsx)(f.a,{handlePageChange:function(e){P(Object(r.c)(e,30,""))},currentPage:I,pageSize:S,pages:N,totalItemsCount:T})}),x||v?x&&!v?Object(o.jsx)(u.a,{width:"60px"}):Object(o.jsx)("h4",{className:"fetchpostserror",children:"Error in Fetching Posts"}):Object(o.jsx)(g,{loggedInUsername:q?q.username:localStorage.getItem("username"),retweetReq:A,likePostReq:D,postActionLoading:O,retweetActionLoading:R,posts:w,submitReplyReq:k,viewSinglePostReq:_,deletePost:function(t,n){e.current=b.b.warning("Delete post in progress"),P(Object(r.b)(t,n)).then((function(){b.b.dismiss(e.current),b.b.success("Delete Post Success")}))},goToProfile:B,pinPost:M,pinnedPost:!1,pinnedPostId:q&&q.pinnedPost?q.pinnedPost._id:null})]})}}}]);
//# sourceMappingURL=8.9991b568.chunk.js.map