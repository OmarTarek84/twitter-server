(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[11],{141:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return d}));var r=a(32),s=a.n(r),n=a(42),o=a(43),c=a(6),u=a(12),i=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(a,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/auth/signup",e);case 3:u.a.push("/login"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:c.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(a,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:c.AUTH_LOADING}),t.prev=1,t.next=4,o.a.post("/auth/login",e);case 4:n=t.sent,localStorage.setItem("accessToken",n.data.accessToken),localStorage.setItem("email",n.data.userDetails.email),localStorage.setItem("userName",n.data.userDetails.username),localStorage.setItem("firstName",n.data.userDetails.firstName),localStorage.setItem("lastName",n.data.userDetails.lastName),localStorage.setItem("profilePic",n.data.userDetails.profilePic),u.a.push("/"),a({type:c.LOGIN,token:n.data.accessToken,userDetails:n.data.userDetails}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:c.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,a){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(a,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.put("/user/pinPost",{postId:e},{headers:{Authorization:"Bearer "+(r().user.token||localStorage.getItem("accessToken"))}});case 3:n=t.sent,console.log(n.data),a({type:c.PIN_POST,pinnedPost:n.data.pinnedPost,pintype:n.data.type}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:c.USER_ERROR,errorMessage:t.t0.response&&t.t0.response.data&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},d=function(e,t,a,r){return function(){var u=Object(n.a)(s.a.mark((function n(u,i){var l;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,u({type:c.USERS_LOADING}),s.next=4,o.a.get("/user/search?currentPage=".concat(e,"&pageSize=").concat(t,"&search=").concat(a,"&filterUsernames=").concat(r),{headers:{Authorization:"Bearer "+(i().user.token||localStorage.getItem("accessToken"))}});case 4:l=s.sent,console.log("SEARCH USERS RESULT",l.data),u({type:c.FETCH_USERS,userDetails:l.data.userDetails,currentPageUser:l.data.currentPage,pageSizeUser:l.data.pageSize,pagesUser:l.data.pages,totalItemsCountUser:l.data.totalItemsCount}),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),u({type:c.USER_ERROR,errorMessage:s.t0.response&&s.t0.response.data&&s.t0.response.data.message?s.t0.response.data.message:s.t0.message});case 12:case"end":return s.stop()}}),n,null,[[0,9]])})));return function(e,t){return u.apply(this,arguments)}}()}},149:function(e,t,a){},150:function(e,t,a){},154:function(e,t,a){"use strict";var r=a(2),s=a(1),n=(a(0),a(149),a(148)),o=(a(150),function(e){var t=e.type,a=e.name,s=e.placeholder,n=e.validationRules,o=e.register,c=e.errors;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:t,name:a,placeholder:s,ref:o(n)}),c&&c[a]&&Object(r.jsx)("p",{className:"error",children:c[a].message})]})}),c=a(44);t.a=function(e){var t=e.submitForm,a=e.defaultValues,u=e.inputs,i=e.errorMessage,l=e.submitBtnText,p=e.authLoading,d=Object(n.a)({defaultValues:a}),m=d.handleSubmit,f=d.register,g=d.errors,h=d.watch,b=u.map((function(e){return Object(r.jsx)("div",{className:"inputParent",children:Object(r.jsx)(o,{type:e.type,placeholder:e.placeholder,name:e.name,validationRules:"confirmPassword"===e.name?Object(s.a)(Object(s.a)({},e.validationRules),{},{validate:function(e){return e===h("password")||"Passwords don't match."}}):e.validationRules,register:f,errors:g})},e.name)}));return Object(r.jsxs)("form",{className:"authForm",onSubmit:m(t),children:[b,i&&Object(r.jsx)("p",{className:"err",children:i}),p?Object(r.jsx)(c.a,{width:"40px"}):Object(r.jsx)("button",{type:"submit",children:l})]})}},157:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var r=a(2),s=a(0),n=a(21),o=a(13),c=a(6),u=a(141),i=a(154),l=a(29),p=a.n(l);a(157);t.default=function(){var e=Object(n.c)((function(e){return e.user})),t=e.errorMessage,a=e.authLoading,l=Object(n.b)();Object(s.useEffect)((function(){l({type:c.CLEAR_USER_ERROR})}),[l]);return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("h2",{children:"Login"}),Object(r.jsx)(i.a,{submitForm:function(e){l(Object(u.a)(e)).then((function(){p()("/").emit("loggedin",e.email)}))},defaultValues:{email:"",password:""},inputs:[{name:"email",placeholder:"Email",type:"email",validationRules:{required:"Email Is Required",pattern:{value:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Entered value does not match email format"}}},{name:"password",placeholder:"Password",type:"password",validationRules:{required:"Password Is Required"}}],submitBtnText:"Login",errorMessage:t,authLoading:a}),Object(r.jsx)(o.a,{to:"/signup",children:"Don't Have Account? Create New Account"})]})}}}]);
//# sourceMappingURL=11.509290c7.chunk.js.map